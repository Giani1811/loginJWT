<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Autenticación Sin Servidores - Demo</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
    <div id="app"></div>
    
    <script>
        // Configurar Supabase (reemplaza con tus credenciales)
        const SUPABASE_URL = 'https://ptfmdwbfmlnrncsifaqb.supabase.co'
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InB0Zm1kd2JmbWxucm5jc2lmYXFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2OTE0MTMsImV4cCI6MjA2NzI2NzQxM30.2Iuq4iScDqWV5KP6HHlvXmG2al084xO14FBTqpmOt90'
        
        // Si no tienes credenciales, usa el modo demo
        const isDemoMode = !SUPABASE_URL.includes('supabase.co')
        
        // Crear cliente de Supabase o mock para demo
        const supabase = isDemoMode ? {
            auth: {
                signInWithOtp: async ({ email }) => {
                    console.log('Demo: Enviando magic link a', email)
                    return { data: {}, error: null }
                },
                signInWithOAuth: async ({ provider }) => {
                    console.log('Demo: OAuth con', provider)
                    window.alert(`Demo: Redirigiendo a ${provider}...`)
                    return { data: {}, error: null }
                },
                getSession: async () => ({ data: { session: null } }),
                onAuthStateChange: () => ({ data: { subscription: { unsubscribe: () => {} } } }),
                signOut: async () => ({ error: null })
            }
        } : window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY)
        
        // Hacer supabase global para los componentes
        window.supabase = supabase
    </script>
    
    <!-- Incluir componentes y App -->
    <script src="./MagicLinkAuth.vue" type="text/x-template" id="magic-link-template"></script>
    <script src="./OAuthAuth.vue" type="text/x-template" id="oauth-template"></script>
    <script src="./BiometricAuth.vue" type="text/x-template" id="biometric-template"></script>
    <script src="./App.vue" type="text/x-template" id="app-template"></script>
    
    <script>
        // Montar la aplicación Vue
        const { createApp } = Vue
        
        createApp({
            template: `
                <div id="app">
                    <div class="header">
                        <h1>🔐 Sistema de Autenticación</h1>
                        <p>Ingresa con tus credenciales</p>
                        ${isDemoMode ? '<p class="demo-mode">⚠️ Modo Demo - Configura Supabase para funcionalidad completa</p>' : ''}
                    </div>
                    
                    <div class="auth-container">
                        <component :is="currentView"></component>
                    </div>
                </div>
            `,
            data() {
                return {
                    currentView: 'demo-component'
                }
            },
            components: {
                'demo-component': {
                    template: `
                        <div class="demo-container">
                            <!-- Modal de Registro -->
                            <div v-if="showRegisterModal" class="modal-overlay" @click.self="showRegisterModal = false">
                                <div class="modal-content">
                                    <button class="modal-close" @click="showRegisterModal = false">×</button>
                                    <h2>📧 Registro de Usuario</h2>
                                    <p>Crea tu cuenta</p>
                                    <input type="email" placeholder="tu@email.com" v-model="registerEmail" class="demo-input">
                                    <input type="password" placeholder="Elige tu contraseña" v-model="registerPassword" class="demo-input">
                                    <button @click="registerUser" class="demo-button">Registrarse</button>
                                    <p class="modal-message" v-if="modalMessage" :class="modalMessageType">{{ modalMessage }}</p>
                                </div>
                            </div>
                            
                            <!-- Modal de Recuperar Contraseña -->
                            <div v-if="showForgotPasswordModal" class="modal-overlay" @click.self="showForgotPasswordModal = false">
                                <div class="modal-content">
                                    <button class="modal-close" @click="showForgotPasswordModal = false">×</button>
                                    <h2>🔑 Recuperar Contraseña</h2>
                                    <p>Ingresa tu email para recibir instrucciones</p>
                                    <input type="email" placeholder="tu@email.com" v-model="resetEmail" class="demo-input">
                                    <button @click="sendPasswordReset" class="demo-button">Enviar instrucciones</button>
                                    <p class="modal-message" v-if="resetMessage" :class="resetMessageType">{{ resetMessage }}</p>
                                </div>
                            </div>
                            
                            <!-- Modal de Cambiar Contraseña (cuando viene del email) -->
                            <div v-if="showResetPasswordModal" class="modal-overlay">
                                <div class="modal-content">
                                    <h2>🔐 Nueva Contraseña</h2>
                                    <p>Ingresa tu nueva contraseña</p>
                                    <input type="password" placeholder="Nueva contraseña" v-model="newPassword" class="demo-input">
                                    <input type="password" placeholder="Confirmar contraseña" v-model="newPasswordConfirm" class="demo-input">
                                    <button @click="updatePassword" class="demo-button">Actualizar contraseña</button>
                                    <p class="modal-message" v-if="updateMessage" :class="updateMessageType">{{ updateMessage }}</p>
                                </div>
                            </div>
                            
                            <!-- Modal de Magic Link -->
                            <div v-if="showMagicLinkModal" class="modal-overlay" @click.self="showMagicLinkModal = false">
                                <div class="modal-content">
                                    <button class="modal-close" @click="showMagicLinkModal = false">×</button>
                                    <h2>✉️ Magic Link</h2>
                                    <p>Ingresa tu email para recibir un link de acceso</p>
                                    <input type="email" placeholder="tu@email.com" v-model="magicLinkEmail" class="demo-input">
                                    <button @click="sendMagicLink" class="demo-button">Enviar Magic Link</button>
                                    <p class="modal-message" v-if="magicLinkMessage" :class="magicLinkMessageType">{{ magicLinkMessage }}</p>
                                </div>
                            </div>
                            
                            <!-- Formulario de Login -->
                            <div v-if="!user && !showResetPasswordModal" class="method-card">
                                <h2>🔑 Iniciar Sesión</h2>
                                <p>Ingresa tus credenciales</p>
                                <input type="email" placeholder="Email" v-model="username" class="demo-input">
                                <input type="password" placeholder="Contraseña" v-model="password" class="demo-input">
                                <button @click="login" class="demo-button">Iniciar Sesión</button>
                                
                                <div class="oauth-divider">
                                    <span>o inicia con</span>
                                </div>
                                
                                <button @click="loginWithGitHub" class="demo-button oauth-github">
                                    🐱 Iniciar con GitHub
                                </button>
                                
                                <button @click="showMagicLinkModal = true" class="demo-button magic-link">
                                    ✉️ Ingresa con Magic Link
                                </button>
                                
                                <p class="register-link">
                                    <a href="#" @click.prevent="showForgotPasswordModal = true">¿Olvidaste tu contraseña?</a>
                                </p>
                                <p class="register-link">
                                    ¿No tienes cuenta? <a href="#" @click.prevent="showRegisterModal = true">Regístrate aquí</a>
                                </p>
                            </div>
                            
                            <div v-else-if="user && !showResetPasswordModal" class="user-dashboard">
                                <h2>¡Bienvenido! 🎉</h2>
                                <div class="user-info-card">
                                    <p><strong>Email:</strong> {{ user.email }}</p>
                                    <p><strong>Usuario:</strong> {{ loginCredentials?.username || user.user_metadata?.username }}</p>
                                    <p><strong>ID de Usuario:</strong> {{ user.id }}</p>
                                    <p><strong>Sesión activa desde:</strong> {{ loginTime }}</p>
                                </div>
                                <div v-if="loginCredentials" class="credentials-info">
                                    <h3>🔑 Credenciales de Acceso</h3>
                                    <p><strong>Usuario:</strong> {{ loginCredentials.username }}</p>
                                    <p><strong>Contraseña:</strong> {{ loginCredentials.password }}</p>
                                </div>
                                <div class="jwt-info">
                                    <h3>🔐 JWT Token Decodificado</h3>
                                    
                                    <div v-if="jwtDecoded" class="jwt-decoder">
                                        <div class="jwt-part">
                                            <h5>📋 Header</h5>
                                            <pre class="jwt-display header">{{ JSON.stringify(jwtDecoded.header, null, 2) }}</pre>
                                        </div>
                                        
                                        <div class="jwt-part">
                                            <h5>📦 Payload</h5>
                                            <pre class="jwt-display payload">{{ JSON.stringify(jwtDecoded.payload, null, 2) }}</pre>
                                        </div>
                                        
                                        <div class="jwt-part">
                                            <h5>🔏 Signature</h5>
                                            <pre class="jwt-display signature">{{ jwtDecoded.signature }}</pre>
                                        </div>
                                        
                                        <div class="jwt-status">
                                            <span :class="['status-badge', jwtDecoded.isExpired ? 'expired' : 'valid']">
                                                {{ jwtDecoded.isExpired ? '❌ Expirado' : '✅ Válido' }}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <button @click="signOut" class="demo-button logout">Cerrar Sesión</button>
                            </div>
                            
                            <div v-if="message" class="message">{{ message }}</div>
                        </div>
                    `,
                    data() {
                        return {
                            username: '',
                            password: '',
                            registerEmail: '',
                            registerPassword: '',
                            showRegisterModal: false,
                            showForgotPasswordModal: false,
                            showResetPasswordModal: false,
                            showMagicLinkModal: false,
                            resetEmail: '',
                            newPassword: '',
                            newPasswordConfirm: '',
                            magicLinkEmail: '',
                            message: '',
                            modalMessage: '',
                            modalMessageType: '',
                            resetMessage: '',
                            resetMessageType: '',
                            updateMessage: '',
                            updateMessageType: '',
                            magicLinkMessage: '',
                            magicLinkMessageType: '',
                            user: null,
                            session: null,
                            loginTime: new Date().toLocaleString(),
                            loginCredentials: null
                        }
                    },
                    mounted() {
                        // Verificar si viene del email de recuperación
                        const hashParams = new URLSearchParams(window.location.hash.substring(1))
                        const accessToken = hashParams.get('access_token')
                        const type = hashParams.get('type')
                        
                        if (accessToken && type === 'recovery') {
                            // Usuario viene del email de recuperación
                            this.showResetPasswordModal = true
                            // NO limpiar la URL todavía, necesitamos el token
                            // Supabase necesita el token en la URL para validar
                        } else {
                            // Verificar sesión actual normal
                            supabase.auth.getSession().then(({ data: { session } }) => {
                                this.session = session
                                this.user = session?.user || null
                            })
                        }
                        
                        // Escuchar cambios de autenticación
                        supabase.auth.onAuthStateChange((event, session) => {
                            // Si estamos en modo recuperación, no actualizar usuario
                            if (this.showResetPasswordModal) {
                                return
                            }
                            
                            this.session = session
                            this.user = session?.user || null
                            if (event === 'SIGNED_IN' && !this.showResetPasswordModal) {
                                this.message = '✅ ¡Has iniciado sesión exitosamente!'
                                this.loginTime = new Date().toLocaleString()
                            }
                        })
                    },
                    computed: {
                        jwtDecoded() {
                            if (!this.session?.access_token) return null
                            
                            try {
                                const token = this.session.access_token
                                const parts = token.split('.')
                                
                                if (parts.length !== 3) return null
                                
                                const header = JSON.parse(atob(parts[0]))
                                const payload = JSON.parse(atob(parts[1]))
                                const signature = parts[2]
                                
                                return {
                                    raw: token,
                                    header,
                                    payload,
                                    signature,
                                    isExpired: payload.exp * 1000 < Date.now()
                                }
                            } catch (error) {
                                return null
                            }
                        }
                    },
                    methods: {
                        generateCredentials(email) {
                            // Generar usuario basado en el email
                            const username = email.split('@')[0] + Math.floor(Math.random() * 1000)
                            // Generar contraseña aleatoria segura
                            const password = Math.random().toString(36).substring(2, 8) + Math.random().toString(36).substring(2, 8).toUpperCase() + '!'
                            return { username, password }
                        },
                        async registerUser() {
                            // Validaciones
                            if (!this.registerEmail || !this.registerPassword) {
                                this.modalMessage = '❌ Por favor completa todos los campos'
                                this.modalMessageType = 'error'
                                return
                            }
                            
                            if (this.registerPassword.length < 6) {
                                this.modalMessage = '❌ La contraseña debe tener al menos 6 caracteres'
                                this.modalMessageType = 'error'
                                return
                            }
                            
                            // Registro en Supabase
                            if (isDemoMode) {
                                this.modalMessage = '✅ Demo: Usuario registrado exitosamente'
                                this.modalMessageType = 'success'
                                setTimeout(() => {
                                    this.showRegisterModal = false
                                    this.registerEmail = ''
                                    this.registerPassword = ''
                                }, 2000)
                            } else {
                                // Crear usuario en Supabase
                                const { data, error } = await supabase.auth.signUp({
                                    email: this.registerEmail,
                                    password: this.registerPassword
                                })
                                
                                // Si el registro fue exitoso pero creó una sesión, cerrarla
                                if (!error && data.session) {
                                    await supabase.auth.signOut()
                                }
                                
                                if (error) {
                                    if (error.code === 'user_already_exists') {
                                        this.modalMessage = '❌ Este email ya está registrado'
                                        this.modalMessageType = 'error'
                                    } else {
                                        this.modalMessage = `❌ Error: ${error.message}`
                                        this.modalMessageType = 'error'
                                    }
                                } else {
                                    this.modalMessage = '✅ ¡Registro exitoso! Ya puedes iniciar sesión'
                                    this.modalMessageType = 'success'
                                    
                                    setTimeout(() => {
                                        this.showRegisterModal = false
                                        this.registerEmail = ''
                                        this.registerPassword = ''
                                        this.registerPasswordConfirm = ''
                                        this.modalMessage = ''
                                        this.message = '✅ Registro completado. Inicia sesión con tu email y contraseña'
                                    }, 2000)
                                }
                            }
                        },
                        async login() {
                            if (!this.username || !this.password) {
                                this.message = '❌ Por favor ingresa usuario y contraseña'
                                return
                            }
                            
                            if (isDemoMode) {
                                // Simulación para modo demo
                                this.user = {
                                    email: `${this.username}@demo.com`,
                                    id: 'demo-user-123',
                                    user_metadata: { username: this.username }
                                }
                                this.loginCredentials = {
                                    username: this.username,
                                    password: '******'
                                }
                                this.session = {
                                    access_token: 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJkZW1vLXVzZXItMTIzIiwiZW1haWwiOiJkZW1vQGV4YW1wbGUuY29tIiwiaWF0IjoxNjg5MDAwMDAwLCJleHAiOjE2ODkwMDM2MDB9.demo_signature_here'
                                }
                                this.message = '✅ ¡Demo: Sesión iniciada!'
                            } else {
                                // Login real con Supabase
                                let loginEmail = this.username
                                
                                // Si el usuario ingresó un username sin @, necesitamos buscar el email
                                // Por ahora, asumimos que es un email completo
                                if (!this.username.includes('@')) {
                                    this.message = '❌ Por favor ingresa tu email completo'
                                    return
                                }
                                
                                const { data, error } = await supabase.auth.signInWithPassword({
                                    email: loginEmail,
                                    password: this.password
                                })
                                
                                if (error) {
                                    this.message = `❌ Error: ${error.message}`
                                } else {
                                    // Guardamos las credenciales para mostrar
                                    this.loginCredentials = {
                                        username: data.user?.user_metadata?.username || this.username,
                                        password: '******'
                                    }
                                }
                            }
                        },
                        async loginWithGitHub() {
                            const { error } = await supabase.auth.signInWithOAuth({
                                provider: 'github',
                                options: {
                                    redirectTo: window.location.origin
                                }
                            })
                            if (error) {
                                this.message = `❌ Error: ${error.message}`
                            }
                        },
                        async sendMagicLink() {
                            if (!this.magicLinkEmail) {
                                this.magicLinkMessage = '❌ Por favor ingresa tu email'
                                this.magicLinkMessageType = 'error'
                                return
                            }
                            
                            const { error } = await supabase.auth.signInWithOtp({
                                email: this.magicLinkEmail,
                                options: {
                                    emailRedirectTo: window.location.origin
                                }
                            })
                            
                            if (error) {
                                this.magicLinkMessage = `❌ Error: ${error.message}`
                                this.magicLinkMessageType = 'error'
                            } else {
                                this.magicLinkMessage = '✅ ¡Revisa tu email para el Magic Link!'
                                this.magicLinkMessageType = 'success'
                                setTimeout(() => {
                                    this.showMagicLinkModal = false
                                    this.magicLinkEmail = ''
                                    this.magicLinkMessage = ''
                                    this.message = '📧 Revisa tu email y haz clic en el Magic Link para ingresar'
                                }, 3000)
                            }
                        },
                        async signInOAuth(provider) {
                            const { error } = await supabase.auth.signInWithOAuth({ provider })
                            if (error) this.message = `❌ Error: ${error.message}`
                        },
                        async setupBiometric() {
                            if (!window.PublicKeyCredential) {
                                this.message = '❌ WebAuthn no disponible en este navegador'
                                return
                            }
                        },
                        async signOut() {
                            const { error } = await supabase.auth.signOut()
                            if (!error) {
                                this.user = null
                                this.session = null
                                this.loginCredentials = null
                                this.message = '👋 Has cerrado sesión'
                                this.username = ''
                                this.password = ''
                            }
                        },
                        async sendPasswordReset() {
                            if (!this.resetEmail) {
                                this.resetMessage = '❌ Por favor ingresa tu email'
                                this.resetMessageType = 'error'
                                return
                            }
                            
                            const { error } = await supabase.auth.resetPasswordForEmail(this.resetEmail, {
                                redirectTo: window.location.origin + window.location.pathname
                            })
                            
                            if (error) {
                                this.resetMessage = `❌ Error: ${error.message}`
                                this.resetMessageType = 'error'
                            } else {
                                this.resetMessage = '✅ Revisa tu email para las instrucciones'
                                this.resetMessageType = 'success'
                                setTimeout(() => {
                                    this.showForgotPasswordModal = false
                                    this.resetEmail = ''
                                    this.resetMessage = ''
                                }, 3000)
                            }
                        },
                        async updatePassword() {
                            if (!this.newPassword || !this.newPasswordConfirm) {
                                this.updateMessage = '❌ Por favor completa todos los campos'
                                this.updateMessageType = 'error'
                                return
                            }
                            
                            if (this.newPassword !== this.newPasswordConfirm) {
                                this.updateMessage = '❌ Las contraseñas no coinciden'
                                this.updateMessageType = 'error'
                                return
                            }
                            
                            if (this.newPassword.length < 6) {
                                this.updateMessage = '❌ La contraseña debe tener al menos 6 caracteres'
                                this.updateMessageType = 'error'
                                return
                            }
                            
                            const { error } = await supabase.auth.updateUser({
                                password: this.newPassword
                            })
                            
                            if (error) {
                                this.updateMessage = `❌ Error: ${error.message}`
                                this.updateMessageType = 'error'
                            } else {
                                this.updateMessage = '✅ Contraseña actualizada exitosamente'
                                this.updateMessageType = 'success'
                                
                                // Cerrar sesión y redirigir al login
                                setTimeout(async () => {
                                    await supabase.auth.signOut()
                                    this.showResetPasswordModal = false
                                    this.newPassword = ''
                                    this.newPasswordConfirm = ''
                                    this.updateMessage = ''
                                    this.message = '✅ Contraseña actualizada. Por favor inicia sesión con tu nueva contraseña'
                                    // Ahora sí limpiamos la URL
                                    window.location.hash = ''
                                }, 2000)
                            }
                        }
                    }
                }
            }
        }).mount('#app')
    </script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        #app {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .header p {
            font-size: 1.2rem;
            color: #666;
        }
        
        .demo-mode {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            display: inline-block;
        }
        
        .demo-container {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        
        .method-card {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            text-align: center;
            max-width: 400px;
            width: 100%;
        }
        
        .method-card h2 {
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .method-card p {
            color: #666;
            margin-bottom: 20px;
        }
        
        .demo-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }
        
        .demo-input:focus {
            outline: none;
            border-color: #4CAF50;
        }
        
        .demo-button {
            width: 100%;
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 10px;
        }
        
        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
        
        .demo-button:active {
            transform: translateY(0);
        }
        
        .demo-button {
            background: #4CAF50;
            color: white;
        }
        
        .oauth-google {
            background: #4285F4;
        }
        
        .oauth-github {
            background: #24292e;
            color: white;
            margin-top: 10px;
        }
        
        .oauth-github:hover {
            background: #1a1e22;
            transform: translateY(-2px);
        }
        
        .magic-link {
            background: #9c27b0;
            color: white;
            margin-top: 10px;
        }
        
        .magic-link:hover {
            background: #7b1fa2;
            transform: translateY(-2px);
        }
        
        .oauth-divider {
            text-align: center;
            margin: 20px 0 10px 0;
            position: relative;
        }
        
        .oauth-divider::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
            background: #e0e0e0;
        }
        
        .oauth-divider span {
            background: white;
            padding: 0 15px;
            color: #666;
            font-size: 14px;
        }
        
        .biometric {
            background: #2196F3;
        }
        
        .message {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease;
        }
        
        @keyframes slideUp {
            from {
                transform: translate(-50%, 100px);
                opacity: 0;
            }
            to {
                transform: translate(-50%, 0);
                opacity: 1;
            }
        }
        
        .user-dashboard {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            text-align: center;
        }
        
        .user-info-card {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: left;
        }
        
        .user-info-card p {
            margin: 10px 0;
            word-break: break-all;
        }
        
        .jwt-info {
            background: #f0f0f0;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: left;
        }
        
        .jwt-info h3 {
            margin-bottom: 10px;
            color: #333;
        }
        
        .jwt-info pre {
            background: white;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 12px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        .demo-button.logout {
            background: #f44336;
        }
        
        .demo-button.logout:hover {
            background: #d32f2f;
        }
        
        .register-link {
            margin-top: 20px;
            font-size: 14px;
            color: #666;
        }
        
        .register-link a {
            color: #4CAF50;
            text-decoration: none;
            font-weight: 500;
        }
        
        .register-link a:hover {
            text-decoration: underline;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }
        
        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            max-width: 400px;
            width: 90%;
            position: relative;
            animation: slideDown 0.3s ease;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 28px;
            cursor: pointer;
            color: #999;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s;
        }
        
        .modal-close:hover {
            background: #f5f5f5;
            color: #333;
        }
        
        .credentials-info {
            background: #e8f5e9;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #4CAF50;
        }
        
        .credentials-info h3 {
            margin-bottom: 15px;
            color: #2e7d32;
        }
        
        .credentials-info p {
            margin: 8px 0;
            font-family: monospace;
            font-size: 14px;
        }
        
        .modal-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 5px;
            font-size: 14px;
            text-align: center;
        }
        
        .modal-message.error {
            background: #ffebee;
            color: #c62828;
            border: 1px solid #ef5350;
        }
        
        .modal-message.success {
            background: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #4caf50;
        }
        
        .jwt-decoder {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin: 20px 0;
        }

        .jwt-part {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }

        .jwt-part h5 {
            margin: 0;
            padding: 8px 12px;
            background: #f8f9fa;
            font-size: 14px;
            border-bottom: 1px solid #e0e0e0;
        }

        .jwt-display {
            padding: 12px;
            margin: 0;
            text-align: left;
            font-size: 11px;
            overflow-x: auto;
            background: white;
            border: none;
            font-family: monospace;
        }

        .jwt-display.header {
            background: #e3f2fd;
            color: #1976d2;
        }

        .jwt-display.payload {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .jwt-display.signature {
            background: #fff3e0;
            color: #f57c00;
            font-family: monospace;
            word-break: break-all;
            line-height: 1.4;
        }

        .jwt-status {
            text-align: center;
            margin-top: 16px;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
        }

        .status-badge.valid {
            background: #e8f5e9;
            color: #2e7d32;
        }

        .status-badge.expired {
            background: #ffebee;
            color: #c62828;
        }

        @media (max-width: 768px) {
            .demo-container {
                padding: 0 10px;
            }
        }
    </style>
</body>
</html>